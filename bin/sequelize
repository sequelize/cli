#!/usr/bin/env node
'use strict';

var _yargs = require('yargs');

var _yargs2 = _interopRequireDefault(_yargs);

var _fs = require('fs');

var _fs2 = _interopRequireDefault(_fs);

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _init = require('../lib/commands/init');

var _init2 = _interopRequireDefault(_init);

var _migrate = require('../lib/commands/migrate');

var _migrate2 = _interopRequireDefault(_migrate);

var _migrate_undo = require('../lib/commands/migrate_undo');

var _migrate_undo2 = _interopRequireDefault(_migrate_undo);

var _seed = require('../lib/commands/seed');

var _seed2 = _interopRequireDefault(_seed);

var _seed_one = require('../lib/commands/seed_one');

var _seed_one2 = _interopRequireDefault(_seed_one);

var _migration_create = require('../lib/commands/migration_create');

var _migration_create2 = _interopRequireDefault(_migration_create);

var _model_create = require('../lib/commands/model_create');

var _model_create2 = _interopRequireDefault(_model_create);

var _seed_create = require('../lib/commands/seed_create');

var _seed_create2 = _interopRequireDefault(_seed_create);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

_yargs2.default.command('db:migrate', 'Run pending migrations', _migrate2.default).command('db:migrate:schema:timestamps:add', 'Update migration table to have timestamps', _migrate2.default).command('db:migrate:status', 'List the status of all migrations', _migrate2.default).command('db:migrate:undo', 'Reverts a migration', _migrate_undo2.default).command('db:migrate:undo:all', 'Revert all migrations ran', _migrate2.default).command('db:seed', 'Run specified seeder', _seed_one2.default).command('db:seed:undo', 'Deletes data from the database', _seed_one2.default).command('db:seed:all', 'Run every seeder', _seed2.default).command('db:seed:undo:all', 'Deletes data from the database', _seed2.default).command('init', 'Initializes project', _init2.default).command('init:config', 'Initializes configuration', _init2.default).command('init:migrations', 'Initializes migrations', _init2.default).command('init:models', 'Initializes models', _init2.default).command('init:seeders', 'Initializes seeders', _init2.default).command(['migration:create', 'migration:generate'], 'Generates a new migration file', _migration_create2.default).command(['model:create', 'model:generate'], 'Generates a model and its migration', _model_create2.default).command(['seed:create', 'seed:generate'], 'Generates a new seed file', _seed_create2.default).command('version', 'Prints the version number', () => {}).config(loadRCFile(_yargs2.default.argv.optionsPath)).demandCommand().help().argv;

function loadRCFile(optionsPath) {
  const rcFile = optionsPath || _path2.default.resolve(process.cwd(), '.sequelizerc');
  return _fs2.default.existsSync(rcFile) ? JSON.parse(_fs2.default.readFileSync(rcFile)) : {};
};
